#!/usr/bin/env node

var rollup = require("rollup"),
    nodeResolve = require("rollup-plugin-node-resolve"),
    package = require("../package.json");

rollup.rollup({
  entry: "index.js",
  plugins: [nodeResolve({jsnext: true})]
}).then(function(bundle) {
  return bundle.write({
    format: "umd",
    moduleName: package.name,
    dest: "build/" + package.name + ".js",
    banner: '/* mapmap.js v' + package.version + ' Â© Florian Ledermann <florian.ledermann@tuwien.ac.at> */'
  });
}).then(function() {
  console.warn("Output: build/" + package.name + ".js");
}).catch(abort);

function abort(error) {
  console.error(error.stack);
}